<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta name="viewport" id="this-viewport" content="width=device-width, initial-scale=1, user-scalable=0">
	<script>
		function scaleViewport(refWidth, refHeight){
			if (!refWidth) refWidth = 500;
			if (!refHeight) refHeight = 950;
			var scaleFactor = Math.min(window.screen.width/refWidth, window.screen.height/refHeight);
			if (scaleFactor < 1){
				var mvp = document.getElementById('this-viewport');
				mvp.setAttribute('content', 'width=device-width, initial-scale=' + scaleFactor + ', user-scalable=0');
			}
			//window.matchMedia("(orientation: portrait)").matches
		}
		scaleViewport();
	</script>

	<title>EdgeSquare</title>
	<meta name="application-name" content="EdgeSquare"/>
	<meta name="apple-mobile-web-app-title" content="EdgeSquare">
	<meta name="description" content="Online simulator for edge-to-edge displays with notch or any form of camera cutout. Check out how your web application will look on modern smartphones.">
	<meta name="theme-color" content="#000">
	<link rel="icon" sizes="192x192" href="img/icon.png">
	<link rel="apple-touch-icon" href="img/icon.png">
	
	<!-- open graph settings -->
	<meta property="og:title" content="EdgeSquare"/>
	<meta property="og:determiner" content="the" />
	<meta property="og:url" content="http://bytemind.de/tools/edge-sq/"/>
	<meta property="og:description" content="Online simulator for edge-to-edge displays with notch or any form of camera cutout. Check out how your web application will look on modern smartphones.">
	<meta property="og:image" content="http://bytemind.de/img/icon.png"/>
	<meta property="og:image:width" content="192"/>
	<meta property="og:image:height" content="192"/>
	<meta property="og:image:type" content="image/png"/>
	<meta property="og:image:alt" content="Bytemind Icon"/>
	<meta property="og:type" content="website"/>
	<meta property="og:locale" content="en_GB"/>
	<meta property="og:locale:alternate" content="en_US"/>
	<meta property="og:locale:alternate" content="de_DE"/>
	
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/googleMaterialIcons.css">
</head>
<style>
#controls .pickr {
	border: 1px solid;
    border-radius: 4px;
}
.pickr button,
.pcr-app button {
	min-width: auto;
	min-height: auto;
}
</style>
<body >
	<!-- Main -->
	<div id="display">
		<div id="status-bar">
			<!-- Samsung S10e camera cutout -->
			<div id="notch-samsung-s10e" class="notch-theme">
				<span style="width: 20px;"></span>
				<span class="sb-clock"><em>12:00</em></span>
				<span class="sb-note"></span>
				<span class="sb-email"></span>
				<span class="sb-text"><em>...</em></span>
				<span class="sb-filler"></span>
				<span class="sb-bluetooth"></span>
				<span class="sb-wifi"></span>
				<span class="sb-cell-signal"></span>
				<span class="sb-battery"><em>99%</em></span>
				<span class="sb-camera-hole-1 notch-part"></span>
				<span style="width: 20px;"></span>
			</div>
			<!-- iPhone X/XS/11 Pro notch -->
			<div id="notch-iphone-x" class="notch-theme" style="display: none;">
				<span class="sb-clock" style="width: 83px; text-align: center; flex: 0 0 auto;"><em>12:00</em></span>
				<span class="sb-iphone-x-array notch-part"></span>
				<span class="sb-cell-signal"></span>
				<span class="sb-wifi"></span>
				<span class="sb-battery" style="transform: rotate(90deg); height: 22px; width: 22px;"></span>
				<span style="width: 17px;"></span>
			</div>
			<!-- iPhone 6 (probably 3-8) -->
			<div id="notch-iphone-6" class="notch-theme thin" style="display: none;">
				<span style="width: 0px;"></span>
				<span class="sb-text"><em>••••• Provider 3G</em></span>
				<span class="sb-clock" style="text-align: center; flex: 1 0 auto;"><em>12:00</em></span>
				<span style="width: 34px;"></span>
				<span class="sb-bluetooth"></span>
				<span class="sb-wifi"></span>
				<span class="sb-battery" style="transform: rotate(90deg); height: 22px; width: 22px;"></span>
				<span style="width: 0px;"></span>
			</div>
		</div>
		<iframe id="app" src="index.html" title="Preview"></iframe>
		<div id="nav-bar">
			<!-- Default Android on-screen navigation bar -->
			<div id="nav-android-1" class="nav-bar-theme">
				<span class="nb-recent">|||</span>
				<span class="nb-home"><div></div></span>
				<span class="nb-back">◄</span>
			</div>
			<!-- Default iOS touch navigation bar -->
			<div id="nav-ios-touch-1" class="nav-bar-theme" style="display: none;">
				<span class="nb-home-ios"><div></div></span>
			</div>
			<!-- no navigation bar (hardware buttons) -->
			<div id="nav-hardware" class="nav-bar-theme" style="display: none;">
			</div>
		</div>
	</div>
	<div id="controls">
		<h3>Edge-2-Edge Display Simulator</h3>
		<div>
			<p>App URL</p>
			<input id="app-url" type="url" spellcheck="false" placeholder="http://localhost:8080/index.html" onchange="EdgeSq.setAppUrl(this.value);">
		</div>
		<div>
			<p>Device</p>
			<label>Name:</label><select id="device-name" onchange="EdgeSq.setDevice(this.value);">
				<!-- Available devices | filled dynamically -->
			</select>
		</div>
		<div>
			<p>Status Bar</p>
			<label>Background:</label><input id="status-bar-background" type="color">
			<label>Color:</label><input id="status-bar-color" type="color">
		</div>
		<div>
			<p>Navigation Bar</p>
			<label>Background:</label><input id="nav-bar-background" type="color">
			<label>Color:</label><input id="nav-bar-color" type="color">
		</div>
		<div>
			<p>Toggles</p>
			<label>Display state:</label><button id="toggle-display" onclick="EdgeSq.toggleDisplayState();">Full</button>
		</div>
		<p id="open-source-label">
			<a href="https://github.com/bytemind-de/edge-sq-display-simulator" target=_blank><svg style="width: 209px;height: 27px;padding:5px 0;"><text x="0" y="90%" style="fill: url(#bytemind-color-gradient);">Open-source by bytemind.de</text></svg></a>
		</p>
	</div>
	<script>
		//Edge-Sq Setup
		(function(){
			var EdgeSq = {};
			window.EdgeSq = EdgeSq;
			
			//DEVICES:
			EdgeSq.devices = {
				samsung_s10e: {
					name: "Samsung S10e", 
					displayHeight: "712px", displayWidth: "360px", displayRadius: "42px",
					statusBarHeight: "38px", navBarHeight: "48px", 
					notch: "notch-samsung-s10e", navBar: "nav-android-1"
				},
				iphone_x: {
					name: "iPhone X", 
					displayHeight: "812px", displayWidth: "375px", displayRadius: "40px", 
					statusBarHeight: "44px", navBarHeight: "34px", 
					notch: "notch-iphone-x", navBar: "nav-ios-touch-1"
				},
				iphone_6_plus: {
					name: "iPhone 6-8 Plus", 
					displayHeight: "736px", displayWidth: "414px", displayRadius: "0px", 
					statusBarHeight: "20px", navBarHeight: "0px", 
					notch: "notch-iphone-6", navBar: "nav-hardware"
				},
				iphone_6: {
					name: "iPhone 6-8", 
					displayHeight: "667px", displayWidth: "375px", displayRadius: "0px", 
					statusBarHeight: "20px", navBarHeight: "0px", 
					notch: "notch-iphone-6", navBar: "nav-hardware"
				}
			}
			var deviceSelector = document.getElementById('device-name');
			deviceSelector.innerHTML = "";
			Object.keys(EdgeSq.devices).forEach(function(key){
				deviceSelector.innerHTML += "<option value='" + key + "'>" + EdgeSq.devices[key].name + "</option>";
			});
			EdgeSq.activeDevice = localStorage.getItem('edge-sq-device') || "samsung_s10e";
			
			//DOM
			//TODO: make hard-coded IDs configurable
			
			//status-bar
			applyIconToClass("sb-cell-signal", "signal_cellular_alt");
			applyIconToClass("sb-wifi", "signal_wifi_4_bar");
			applyIconToClass("sb-battery", "battery_full");
			applyIconToClass("sb-note", "notification_important");
			applyIconToClass("sb-bluetooth", "bluetooth");
			applyIconToClass("sb-email", "email");
			
			//colors
			EdgeSq.activeSbBackground = localStorage.getItem('edge-sq-status-bar-bg') || "#000000";
			EdgeSq.activeSbColor = localStorage.getItem('edge-sq-status-bar-col') || "#ffffff";
			EdgeSq.activeNavBackground = localStorage.getItem('edge-sq-nav-bar-bg') || "#000000";
			EdgeSq.activeNavColor = localStorage.getItem('edge-sq-nav-bar-col') || "#ffffff";
					
			//controls
			
			//app URL
			EdgeSq.setAppUrl = function(url){
				document.getElementById('app-url').value = url;
				document.getElementById('app').src = url;
				localStorage.setItem('edge-sq-app-url', url);
			}
			
			EdgeSq.setStatusBarBackground = function(color){
				document.documentElement.style.setProperty('--status-bar-bg', color);
				sbBackColor = color;
				//document.getElementById('status-bar-background').value = color;
				localStorage.setItem('edge-sq-status-bar-bg', color);
			}
			EdgeSq.setStatusBarColor = function(color){
				document.documentElement.style.setProperty('--status-bar-col', color);
				//document.getElementById('status-bar-color').value = color;
				localStorage.setItem('edge-sq-status-bar-col',color);
			}
			EdgeSq.setNavBarBackground = function(color){
				document.documentElement.style.setProperty('--nav-bar-bg', color);
				//document.getElementById('nav-bar-background').value = color;
				localStorage.setItem('edge-sq-nav-bar-bg', color);
			}
			EdgeSq.setNavBarColor = function(color){
				document.documentElement.style.setProperty('--nav-bar-col', color);
				//document.getElementById('nav-bar-color').value = color;
				localStorage.setItem('edge-sq-nav-bar-col', color);
			}
			
			EdgeSq.setDevice = function(deviceId){
				var deviceData = EdgeSq.devices[deviceId];
				document.documentElement.style.setProperty('--display-h', deviceData.displayHeight || "850px");
				document.documentElement.style.setProperty('--display-w', deviceData.displayWidth || "400px");
				document.documentElement.style.setProperty('--display-rad', deviceData.displayRadius || "42px");
				document.documentElement.style.setProperty('--status-bar-h', deviceData.statusBarHeight || "38px");
				document.documentElement.style.setProperty('--nav-bar-h', deviceData.navBarHeight || "48px");
				document.getElementById('device-name').value = deviceId;
				var notches = document.getElementsByClassName("notch-theme");
				for (var i=0; i<notches.length; i++){
					notches[i].style.display = "none";
				}
				document.getElementById(deviceData.notch).style.removeProperty("display");
				var navbars = document.getElementsByClassName("nav-bar-theme");
				for (var i=0; i<navbars.length; i++){
					navbars[i].style.display = "none";
				}
				document.getElementById(deviceData.navBar).style.removeProperty("display");
				localStorage.setItem('edge-sq-device', deviceId);
			}
			
			EdgeSq.toggleDisplayState = function(){
				var display = document.getElementById("display");
				var btn = document.getElementById("toggle-display");
				if (display.classList.contains("classic")){
					display.classList.remove("classic");
					showStatusBarIcons();
					btn.innerHTML = "Full";
				}else if (display.classList.contains("fullscreen")){
					display.classList.remove("fullscreen");
					display.classList.add("classic");
					btn.innerHTML = "Edge-to-Edge";
				}else{
					display.classList.add("fullscreen");
					hideStatusBarIcons();
					btn.innerHTML = "Classic";
				}
			}
			function hideStatusBarIcons(){
				var notches = document.getElementsByClassName("notch-theme");
				for (var i=0; i<notches.length; i++){
					var icons = notches[i].children;
					for (var j=0; j<icons.length; j++){
						if (!icons[j].classList.contains("notch-part")){
							icons[j].style.visibility = "hidden";
						}
					}
				}
			}
			function showStatusBarIcons(){
				var notches = document.getElementsByClassName("notch-theme");
				for (var i=0; i<notches.length; i++){
					var icons = notches[i].children;
					for (var j=0; j<icons.length; j++){
						icons[j].style.removeProperty("visibility");
					}
				}
			}
			
			//helpers
			
			function applyIconToClass(clazz, icon){
				var elements = document.getElementsByClassName(clazz);
				if (elements && elements.length > 0){
					for (var i=0; i<elements.length; i++){
						elements[i].innerHTML += "<i class='material-icons'>" + icon + "</i>";
					}
				}
			}
			
			//initialize
			
			EdgeSq.setAppUrl(localStorage.getItem('edge-sq-app-url') || "https://sepia-framework.github.io/app/");
			EdgeSq.setDevice(EdgeSq.activeDevice);
			EdgeSq.setStatusBarBackground(EdgeSq.activeSbBackground);
			EdgeSq.setStatusBarColor(EdgeSq.activeSbColor);
			EdgeSq.setNavBarBackground(EdgeSq.activeNavBackground);
			EdgeSq.setNavBarColor(EdgeSq.activeNavColor);

		})();
	</script>
	<!-- low prio style sheets and js -->
	<link rel="stylesheet" href="css/pickr-classic.min.css"/>
	<script src="js/pickr.min.js"></script>
	<script>
		(function(){
			var defaultColorPickerSettings = {
				theme: 'classic',
				components: {
					// Main components
					preview: true,
					opacity: true,
					hue: true,
					// Input / output Options
					interaction: {
						hex: true,
						rgba: true,
						hsla: false,
						hsva: false,
						cmyk: false,
						input: true,
						clear: false,
						save: false,
						cancel: false
					}
				}
			};
			var colorControls = {
				statusBarBack: {ele: '#status-bar-background', fun: EdgeSq.setStatusBarBackground, def: EdgeSq.activeSbBackground},
				statusBarCol: {ele: '#status-bar-color', fun: EdgeSq.setStatusBarColor, def: EdgeSq.activeSbColor},
				navBarBack: {ele: '#nav-bar-background', fun: EdgeSq.setNavBarBackground, def: EdgeSq.activeNavBackground},
				navBarCol: {ele: '#nav-bar-color', fun: EdgeSq.setNavBarColor, def: EdgeSq.activeNavColor}
			}
			Object.keys(colorControls).forEach(function(ctrl){
				var ctrlData = colorControls[ctrl];
				var pickrConf = JSON.parse(JSON.stringify(defaultColorPickerSettings));
				pickrConf.el = ctrlData.ele;
				var pickr = Pickr.create(pickrConf);
				pickr
					.on('init', function(instance){
						instance.setColor(ctrlData.def, true);
						instance.applyColor(true);
					})
					.on('hide', function(instance){
						instance.applyColor(true);
					})
					.on('change', function(color, instance){
						ctrlData.fun(color.toHEXA().toString());
					})
				;
			});
		})();
	</script>
	<div style="position: absolute; width: 0px; height: 0px; overflow: hidden;">
		<svg><defs><linearGradient id="bytemind-color-gradient">
			<stop offset=".15" stop-color="#44c8be"></stop><stop offset=".40" stop-color="#5683c4"></stop>
			<stop offset=".85" stop-color="#a147b0"></stop>
		</linearGradient></defs></svg>
	</div>
</body>
</html>
